---

title: Processing


keywords: fastai
sidebar: home_sidebar

summary: "This notebook contains the processing pipeline."
description: "This notebook contains the processing pipeline."
nb_path: "00_processing.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_processing.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Imports">Imports<a class="anchor-link" href="#Imports"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">socembed</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Variables">Variables<a class="anchor-link" href="#Variables"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">LEX</span> <span class="o">=</span> <span class="s1">&#39;Anglo-Saxon&#39;</span>
<span class="n">CORPUS_DIR</span> <span class="o">=</span> <span class="s1">&#39;/Volumes/qjd/promo/SocEmb/data/psaw/&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Read-data">Read data<a class="anchor-link" href="#Read-data"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fpaths</span> <span class="o">=</span> <span class="n">get_fpaths</span><span class="p">(</span><span class="s1">&#39;Anglo-Saxon&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">read_files</span><span class="p">(</span><span class="n">fpaths</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">parse_dates</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>body</th>
      <th>created_utc</th>
      <th>id</th>
      <th>subreddit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>117981</th>
      <td>What's interesting is that in other statistics...</td>
      <td>2006-02-04 19:10:02</td>
      <td>c19aw</td>
      <td>reddit.com</td>
    </tr>
    <tr>
      <th>117980</th>
      <td>It's a pity that The Economist doesn't just le...</td>
      <td>2006-03-31 20:19:59</td>
      <td>c3rb4</td>
      <td>reddit.com</td>
    </tr>
    <tr>
      <th>117979</th>
      <td>ROFL - pica, what prompted this little diatrib...</td>
      <td>2006-04-05 19:35:05</td>
      <td>c3ywe</td>
      <td>reddit.com</td>
    </tr>
    <tr>
      <th>117978</th>
      <td>Agreed, and it points up the absurdity of the ...</td>
      <td>2006-05-23 18:43:32</td>
      <td>c6gks</td>
      <td>reddit.com</td>
    </tr>
    <tr>
      <th>117977</th>
      <td>What if your groups don't make any sense?  Thi...</td>
      <td>2006-05-23 23:26:17</td>
      <td>c6h6i</td>
      <td>reddit.com</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>117986</th>
      <td>oh for sure, I just meant to say that anyone w...</td>
      <td>2020-10-06 19:59:46</td>
      <td>g7xj5pq</td>
      <td>politics</td>
    </tr>
    <tr>
      <th>117985</th>
      <td>didn't howard write the shadow over innsmouth ...</td>
      <td>2020-10-06 20:06:46</td>
      <td>g7xk783</td>
      <td>IcebergCharts</td>
    </tr>
    <tr>
      <th>117984</th>
      <td>Again, you're putting words in my mouth, and I...</td>
      <td>2020-10-06 20:09:14</td>
      <td>g7xkkch</td>
      <td>victoria2</td>
    </tr>
    <tr>
      <th>117983</th>
      <td>Oh man, English is so bloody weird. Like, yes ...</td>
      <td>2020-10-06 20:10:18</td>
      <td>g7xkptp</td>
      <td>TheOwlHouse</td>
    </tr>
    <tr>
      <th>117982</th>
      <td>The religion of Brittany could be a cult to ki...</td>
      <td>2020-10-06 20:23:54</td>
      <td>g7xmm1j</td>
      <td>NewEraOldWorld</td>
    </tr>
  </tbody>
</table>
<p>138925 rows Ã— 4 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Clean-data">Clean data<a class="anchor-link" href="#Clean-data"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Remove-bot-subreddits">Remove bot subreddits<a class="anchor-link" href="#Remove-bot-subreddits"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">rm_bots_subreddits</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>bot comments (abs): 0
bot comments (rel): 0.0
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Remove-duplicate-comments">Remove duplicate comments<a class="anchor-link" href="#Remove-duplicate-comments"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">rm_dupl_comments</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>duplicates removed: 16812
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Remove-comments-without-target-tokens">Remove comments without target tokens<a class="anchor-link" href="#Remove-comments-without-target-tokens"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">rm_comm_no_toks</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">LEX</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>                0       1
0  total comments  122113
1      w/o tokens    1635
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Export-notebooks">Export notebooks<a class="anchor-link" href="#Export-notebooks"> </a></h1>
</div>
</div>
</div>
</div>
 

